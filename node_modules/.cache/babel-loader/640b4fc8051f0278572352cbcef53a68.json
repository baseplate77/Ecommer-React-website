{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from\"react\";import{Route,Switch,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import HomePage from\"./pages/homepage\";import Checkout from\"./pages/checkout/Checkout\";import Header from\"./componemts/Header/Header\";import Shop from\"./pages/Shop/Shop\";import SignInOut from\"./pages/sign-in-out/SignInOut\";import{setCurrentUser}from\"./redux/user/user.action\";import{auth,createUserProfileDocument}from\"./firebase/firebase.utils\";import\"./App.css\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubcribed=null;return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.unsubcribed=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapshot){return _this2.props.setCurrentUser(_objectSpread({id:snapshot.id},snapshot.data()));});_context.next=8;break;case 7:_this2.props.setCurrentUser(null);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubcribed();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",component:Shop}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",component:Checkout}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signin\",render:function render(){return _this3.props.currentUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(SignInOut,{});}})]})]});}}]);return App;}(React.Component);// const mapDispatchToProps = (dispatch) => ({\n//   setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n// });\nvar mapStateToProps=function mapStateToProps(state){return{currentUser:state.user.currentUser};};export default connect(mapStateToProps,{setCurrentUser:setCurrentUser})(App);","map":{"version":3,"sources":["C:/Users/NayanJagtap/Desktop/current/crwn-clothing/src/App.js"],"names":["React","Route","Switch","Redirect","connect","HomePage","Checkout","Header","Shop","SignInOut","setCurrentUser","auth","createUserProfileDocument","App","unsubcribed","onAuthStateChanged","userAuth","userRef","onSnapshot","snapshot","props","id","data","currentUser","Component","mapStateToProps","state","user"],"mappings":"muCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,kBAAxC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,OAASC,cAAT,KAA+B,0BAA/B,CACA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,2BAAhD,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,2TACJC,W,CAAc,I,4FAEM,iBAClB,KAAKA,WAAL,CAAmBH,IAAI,CAACI,kBAAL,0FAAwB,iBAAOC,QAAP,kIACrCA,QADqC,+CAEjBJ,CAAAA,yBAAyB,CAACI,QAAD,CAFR,QAEjCC,OAFiC,eAGvCA,OAAO,CAACC,UAAR,CAAmB,SAACC,QAAD,QACjB,CAAA,MAAI,CAACC,KAAL,CAAWV,cAAX,gBACEW,EAAE,CAAEF,QAAQ,CAACE,EADf,EAEKF,QAAQ,CAACG,IAAT,EAFL,EADiB,EAAnB,EAHuC,6BAUvC,MAAI,CAACF,KAAL,CAAWV,cAAX,CAA0B,IAA1B,EAVuC,sDAAxB,+DAAnB,CAaD,C,mEACsB,CACrB,KAAKI,WAAL,GACD,C,uCAEQ,iBACP,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAET,QAAjC,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEG,IAA/B,EAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,SAAS,CAAEF,QAAnC,EAHF,cAIE,KAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,SAFP,CAGE,MAAM,CAAE,wBACN,CAAA,MAAI,CAACc,KAAL,CAAWG,WAAX,cAAyB,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAzB,cAA+C,KAAC,SAAD,IADzC,EAHV,EAJF,GAFF,GADF,CAiBD,C,iBAxCevB,KAAK,CAACwB,S,EA0CxB;AACA;AACA;AACA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,QAAY,CAClCH,WAAW,CAAEG,KAAK,CAACC,IAAN,CAAWJ,WADU,CAAZ,EAAxB,CAGA,cAAenB,CAAAA,OAAO,CAACqB,eAAD,CAAkB,CAAEf,cAAc,CAAdA,cAAF,CAAlB,CAAP,CAA6CG,GAA7C,CAAf","sourcesContent":["import React from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport HomePage from \"./pages/homepage\";\nimport Checkout from \"./pages/checkout/Checkout\";\nimport Header from \"./componemts/Header/Header\";\nimport Shop from \"./pages/Shop/Shop\";\nimport SignInOut from \"./pages/sign-in-out/SignInOut\";\nimport { setCurrentUser } from \"./redux/user/user.action\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  unsubcribed = null;\n\n  componentDidMount() {\n    this.unsubcribed = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot((snapshot) =>\n          this.props.setCurrentUser({\n            id: snapshot.id,\n            ...snapshot.data(),\n          })\n        );\n      } else {\n        this.props.setCurrentUser(null);\n      }\n    });\n  }\n  componentWillUnmount() {\n    this.unsubcribed();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header />\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/shop\" component={Shop} />\n          <Route path=\"/checkout\" component={Checkout} />\n          <Route\n            exact\n            path=\"/signin\"\n            render={() =>\n              this.props.currentUser ? <Redirect to=\"/\" /> : <SignInOut />\n            }\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n// const mapDispatchToProps = (dispatch) => ({\n//   setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n// });\nconst mapStateToProps = (state) => ({\n  currentUser: state.user.currentUser,\n});\nexport default connect(mapStateToProps, { setCurrentUser })(App);\n"]},"metadata":{},"sourceType":"module"}