{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/NayanJagtap/Desktop/current/crwn-clothing/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(setUserSnapshot),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(googleSignInStart),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(onGoogleSignInStart),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(emailSignInStart),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(onEmailSignInStart),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(userSignOut),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(onUserSignOut),_marked8=/*#__PURE__*/_regeneratorRuntime.mark(signUpStart),_marked9=/*#__PURE__*/_regeneratorRuntime.mark(onSignUpStart),_marked10=/*#__PURE__*/_regeneratorRuntime.mark(sessionCheck),_marked11=/*#__PURE__*/_regeneratorRuntime.mark(onCheckSession),_marked12=/*#__PURE__*/_regeneratorRuntime.mark(userSaga);import{takeLatest,put,all,call}from\"redux-saga/effects\";import userActionType from\"./user.type\";import{signInFailure,signInSuccess,userSignoutSuccess,userSignoutFailure,setSession}from\"./user.action\";import{auth,googleProvider,createUserProfileDocument,getCurrentuser}from\"../../firebase/firebase.utils\";export function setUserSnapshot(user,addtionalData){var userRef,userSnapshot;return _regeneratorRuntime.wrap(function setUserSnapshot$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return createUserProfileDocument(user,addtionalData);case 3:userRef=_context.sent;_context.next=6;return userRef.get();case 6:userSnapshot=_context.sent;_context.next=9;return put(signInSuccess(_objectSpread({id:userSnapshot.id},userSnapshot.data())));case 9:_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);_context.next=16;return put(signInFailure(_context.t0.message));case 16:case\"end\":return _context.stop();}}},_marked,null,[[0,11]]);}export function googleSignInStart(){var _yield$auth$signInWit,user;return _regeneratorRuntime.wrap(function googleSignInStart$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(\"user saga get called\");_context2.next=4;return auth.signInWithPopup(googleProvider);case 4:_yield$auth$signInWit=_context2.sent;user=_yield$auth$signInWit.user;_context2.next=8;return setUserSnapshot(user);case 8:_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);_context2.next=15;return put(signInFailure(_context2.t0.message));case 15:case\"end\":return _context2.stop();}}},_marked2,null,[[0,10]]);}export function onGoogleSignInStart(){return _regeneratorRuntime.wrap(function onGoogleSignInStart$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return takeLatest(userActionType.GOOGLE_SIGN_IN_START,googleSignInStart);case 2:case\"end\":return _context3.stop();}}},_marked3);}export function emailSignInStart(_ref){var _ref$payload,email,password,_yield$auth$signInWit2,user;return _regeneratorRuntime.wrap(function emailSignInStart$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref$payload=_ref.payload,email=_ref$payload.email,password=_ref$payload.password;_context4.prev=1;console.log(\"yess\");_context4.next=5;return auth.signInWithEmailAndPassword(email,password);case 5:_yield$auth$signInWit2=_context4.sent;user=_yield$auth$signInWit2.user;_context4.next=9;return setUserSnapshot(user);case 9:_context4.next=16;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);_context4.next=16;return put(signInFailure(_context4.t0));case 16:case\"end\":return _context4.stop();}}},_marked4,null,[[1,11]]);}export function onEmailSignInStart(){return _regeneratorRuntime.wrap(function onEmailSignInStart$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return takeLatest(userActionType.EMAIL_SIGN_IN_START,emailSignInStart);case 2:case\"end\":return _context5.stop();}}},_marked5);}export function userSignOut(){return _regeneratorRuntime.wrap(function userSignOut$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return auth.signOut();case 3:_context6.next=5;return put(userSignoutSuccess());case 5:_context6.next=11;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);_context6.next=11;return put(userSignoutFailure(_context6.t0.message));case 11:case\"end\":return _context6.stop();}}},_marked6,null,[[0,7]]);}export function onUserSignOut(){return _regeneratorRuntime.wrap(function onUserSignOut$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return takeLatest(userActionType.USER_SIGN_OUT_START,userSignOut);case 2:case\"end\":return _context7.stop();}}},_marked7);}function signUpStart(_ref2){var _ref2$payload,email,password,displayName,_yield$auth$createUse,user;return _regeneratorRuntime.wrap(function signUpStart$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_ref2$payload=_ref2.payload,email=_ref2$payload.email,password=_ref2$payload.password,displayName=_ref2$payload.displayName;_context8.prev=1;_context8.next=4;return auth.createUserWithEmailAndPassword(email,password);case 4:_yield$auth$createUse=_context8.sent;user=_yield$auth$createUse.user;_context8.next=8;return setUserSnapshot(user,displayName);case 8:_context8.next=14;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](1);_context8.next=14;return put(signInFailure(_context8.t0.message));case 14:case\"end\":return _context8.stop();}}},_marked8,null,[[1,10]]);}export function onSignUpStart(){return _regeneratorRuntime.wrap(function onSignUpStart$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeLatest(userActionType.SIGN_UP_START,signUpStart);case 2:case\"end\":return _context9.stop();}}},_marked9);}export function sessionCheck(){var userAuth;return _regeneratorRuntime.wrap(function sessionCheck$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return call(getCurrentuser);case 2:userAuth=_context10.sent;console.log(userAuth);if(!userAuth){_context10.next=7;break;}_context10.next=7;return put(setSession(userAuth));case 7:case\"end\":return _context10.stop();}}},_marked10);}export function onCheckSession(){return _regeneratorRuntime.wrap(function onCheckSession$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return takeLatest(userActionType.CHECK_SEESION,sessionCheck);case 2:case\"end\":return _context11.stop();}}},_marked11);}export function userSaga(){return _regeneratorRuntime.wrap(function userSaga$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return all([call(onGoogleSignInStart),call(onUserSignOut),call(onEmailSignInStart),call(onSignUpStart),call(onCheckSession)]);case 2:case\"end\":return _context12.stop();}}},_marked12);}","map":{"version":3,"sources":["C:/Users/NayanJagtap/Desktop/current/crwn-clothing/src/redux/user/user.sagas.js"],"names":["setUserSnapshot","googleSignInStart","onGoogleSignInStart","emailSignInStart","onEmailSignInStart","userSignOut","onUserSignOut","signUpStart","onSignUpStart","sessionCheck","onCheckSession","userSaga","takeLatest","put","all","call","userActionType","signInFailure","signInSuccess","userSignoutSuccess","userSignoutFailure","setSession","auth","googleProvider","createUserProfileDocument","getCurrentuser","user","addtionalData","userRef","get","userSnapshot","id","data","console","log","message","signInWithPopup","GOOGLE_SIGN_IN_START","payload","email","password","signInWithEmailAndPassword","EMAIL_SIGN_IN_START","signOut","USER_SIGN_OUT_START","displayName","createUserWithEmailAndPassword","SIGN_UP_START","userAuth","CHECK_SEESION"],"mappings":"0XAiBiBA,e,iDAWAC,iB,iDAWAC,mB,iDAIAC,gB,iDAWAC,kB,iDAIAC,W,iDASAC,a,iDAIPC,W,iDASOC,a,kDAIAC,Y,kDAMAC,c,kDAGAC,Q,EA7FjB,OAASC,UAAT,CAAqBC,GAArB,CAA0BC,GAA1B,CAA+BC,IAA/B,KAA2C,oBAA3C,CAEA,MAAOC,CAAAA,cAAP,KAA2B,aAA3B,CACA,OACEC,aADF,CAEEC,aAFF,CAGEC,kBAHF,CAIEC,kBAJF,CAKEC,UALF,KAMO,eANP,CAOA,OACEC,IADF,CAEEC,cAFF,CAGEC,yBAHF,CAIEC,cAJF,KAKO,+BALP,CAOA,MAAO,SAAUzB,CAAAA,eAAV,CAA0B0B,IAA1B,CAAgCC,aAAhC,mLAEa,MAAMH,CAAAA,yBAAyB,CAACE,IAAD,CAAOC,aAAP,CAA/B,CAFb,OAEGC,OAFH,+BAGkB,MAAMA,CAAAA,OAAO,CAACC,GAAR,EAAN,CAHlB,OAGGC,YAHH,+BAIH,MAAMjB,CAAAA,GAAG,CAACK,aAAa,gBAAGa,EAAE,CAAED,YAAY,CAACC,EAApB,EAA2BD,YAAY,CAACE,IAAb,EAA3B,EAAd,CAAT,CAJG,wFAMHC,OAAO,CAACC,GAAR,cANG,iBAOH,MAAMrB,CAAAA,GAAG,CAACI,aAAa,CAAC,YAAMkB,OAAP,CAAd,CAAT,CAPG,qEAWP,MAAO,SAAUlC,CAAAA,iBAAV,gLAEHgC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAFG,iBAGc,MAAMZ,CAAAA,IAAI,CAACc,eAAL,CAAqBb,cAArB,CAAN,CAHd,4CAGKG,IAHL,uBAGKA,IAHL,kBAIH,MAAM1B,CAAAA,eAAe,CAAC0B,IAAD,CAArB,CAJG,4FAMHO,OAAO,CAACC,GAAR,eANG,kBAOH,MAAMrB,CAAAA,GAAG,CAACI,aAAa,CAAC,aAAMkB,OAAP,CAAd,CAAT,CAPG,uEAWP,MAAO,SAAUjC,CAAAA,mBAAV,mJACL,MAAMU,CAAAA,UAAU,CAACI,cAAc,CAACqB,oBAAhB,CAAsCpC,iBAAtC,CAAhB,CADK,wDAIP,MAAO,SAAUE,CAAAA,gBAAV,iNAA6BmC,OAA7B,CAAwCC,KAAxC,cAAwCA,KAAxC,CAA+CC,QAA/C,cAA+CA,QAA/C,kBAEHP,OAAO,CAACC,GAAR,CAAY,MAAZ,EAFG,iBAGc,MAAMZ,CAAAA,IAAI,CAACmB,0BAAL,CAAgCF,KAAhC,CAAuCC,QAAvC,CAAN,CAHd,6CAGKd,IAHL,wBAGKA,IAHL,kBAIH,MAAM1B,CAAAA,eAAe,CAAC0B,IAAD,CAArB,CAJG,4FAMHO,OAAO,CAACC,GAAR,eANG,kBAOH,MAAMrB,CAAAA,GAAG,CAACI,aAAa,cAAd,CAAT,CAPG,uEAWP,MAAO,SAAUb,CAAAA,kBAAV,kJACL,MAAMQ,CAAAA,UAAU,CAACI,cAAc,CAAC0B,mBAAhB,CAAqCvC,gBAArC,CAAhB,CADK,wDAIP,MAAO,SAAUE,CAAAA,WAAV,4JAEH,MAAMiB,CAAAA,IAAI,CAACqB,OAAL,EAAN,CAFG,wBAGH,MAAM9B,CAAAA,GAAG,CAACM,kBAAkB,EAAnB,CAAT,CAHG,4GAKH,MAAMN,CAAAA,GAAG,CAACO,kBAAkB,CAAC,aAAMe,OAAP,CAAnB,CAAT,CALG,sEASP,MAAO,SAAU7B,CAAAA,aAAV,6IACL,MAAMM,CAAAA,UAAU,CAACI,cAAc,CAAC4B,mBAAhB,CAAqCvC,WAArC,CAAhB,CADK,wDAIP,QAAUE,CAAAA,WAAV,2NAAwB+B,OAAxB,CAAmCC,KAAnC,eAAmCA,KAAnC,CAA0CC,QAA1C,eAA0CA,QAA1C,CAAoDK,WAApD,eAAoDA,WAApD,mCAEqB,MAAMvB,CAAAA,IAAI,CAACwB,8BAAL,CAAoCP,KAApC,CAA2CC,QAA3C,CAAN,CAFrB,4CAEYd,IAFZ,uBAEYA,IAFZ,kBAGI,MAAM1B,CAAAA,eAAe,CAAC0B,IAAD,CAAOmB,WAAP,CAArB,CAHJ,8GAKI,MAAMhC,CAAAA,GAAG,CAACI,aAAa,CAAC,aAAMkB,OAAP,CAAd,CAAT,CALJ,uEASA,MAAO,SAAU3B,CAAAA,aAAV,6IACL,MAAMI,CAAAA,UAAU,CAACI,cAAc,CAAC+B,aAAhB,CAA+BxC,WAA/B,CAAhB,CADK,wDAIP,MAAO,SAAUE,CAAAA,YAAV,6JACY,MAAMM,CAAAA,IAAI,CAACU,cAAD,CAAV,CADZ,OACCuB,QADD,iBAELf,OAAO,CAACC,GAAR,CAAYc,QAAZ,EAFK,IAGDA,QAHC,6CAGS,MAAMnC,CAAAA,GAAG,CAACQ,UAAU,CAAC2B,QAAD,CAAX,CAAT,CAHT,0DAMP,MAAO,SAAUtC,CAAAA,cAAV,kJACL,MAAME,CAAAA,UAAU,CAACI,cAAc,CAACiC,aAAhB,CAA+BxC,YAA/B,CAAhB,CADK,0DAGP,MAAO,SAAUE,CAAAA,QAAV,4IACL,MAAMG,CAAAA,GAAG,CAAC,CACRC,IAAI,CAACb,mBAAD,CADI,CAERa,IAAI,CAACT,aAAD,CAFI,CAGRS,IAAI,CAACX,kBAAD,CAHI,CAIRW,IAAI,CAACP,aAAD,CAJI,CAKRO,IAAI,CAACL,cAAD,CALI,CAAD,CAAT,CADK","sourcesContent":["import { takeLatest, put, all, call } from \"redux-saga/effects\";\r\n\r\nimport userActionType from \"./user.type\";\r\nimport {\r\n  signInFailure,\r\n  signInSuccess,\r\n  userSignoutSuccess,\r\n  userSignoutFailure,\r\n  setSession,\r\n} from \"./user.action\";\r\nimport {\r\n  auth,\r\n  googleProvider,\r\n  createUserProfileDocument,\r\n  getCurrentuser,\r\n} from \"../../firebase/firebase.utils\";\r\n\r\nexport function* setUserSnapshot(user, addtionalData) {\r\n  try {\r\n    const userRef = yield createUserProfileDocument(user, addtionalData);\r\n    const userSnapshot = yield userRef.get();\r\n    yield put(signInSuccess({ id: userSnapshot.id, ...userSnapshot.data() }));\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put(signInFailure(error.message));\r\n  }\r\n}\r\n\r\nexport function* googleSignInStart() {\r\n  try {\r\n    console.log(\"user saga get called\");\r\n    const { user } = yield auth.signInWithPopup(googleProvider);\r\n    yield setUserSnapshot(user);\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put(signInFailure(error.message));\r\n  }\r\n}\r\n\r\nexport function* onGoogleSignInStart() {\r\n  yield takeLatest(userActionType.GOOGLE_SIGN_IN_START, googleSignInStart);\r\n}\r\n\r\nexport function* emailSignInStart({ payload: { email, password } }) {\r\n  try {\r\n    console.log(\"yess\");\r\n    const { user } = yield auth.signInWithEmailAndPassword(email, password);\r\n    yield setUserSnapshot(user);\r\n  } catch (error) {\r\n    console.log(error);\r\n    yield put(signInFailure(error));\r\n  }\r\n}\r\n\r\nexport function* onEmailSignInStart() {\r\n  yield takeLatest(userActionType.EMAIL_SIGN_IN_START, emailSignInStart);\r\n}\r\n\r\nexport function* userSignOut() {\r\n  try {\r\n    yield auth.signOut();\r\n    yield put(userSignoutSuccess());\r\n  } catch (error) {\r\n    yield put(userSignoutFailure(error.message));\r\n  }\r\n}\r\n\r\nexport function* onUserSignOut() {\r\n  yield takeLatest(userActionType.USER_SIGN_OUT_START, userSignOut);\r\n}\r\n\r\nfunction* signUpStart({ payload: { email, password, displayName } }) {\r\n  try {\r\n    const { user } = yield auth.createUserWithEmailAndPassword(email, password);\r\n    yield setUserSnapshot(user, displayName);\r\n  } catch (error) {\r\n    yield put(signInFailure(error.message));\r\n  }\r\n}\r\n\r\nexport function* onSignUpStart() {\r\n  yield takeLatest(userActionType.SIGN_UP_START, signUpStart);\r\n}\r\n\r\nexport function* sessionCheck() {\r\n  const userAuth = yield call(getCurrentuser);\r\n  console.log(userAuth);\r\n  if (userAuth) yield put(setSession(userAuth));\r\n}\r\n\r\nexport function* onCheckSession() {\r\n  yield takeLatest(userActionType.CHECK_SEESION, sessionCheck);\r\n}\r\nexport function* userSaga() {\r\n  yield all([\r\n    call(onGoogleSignInStart),\r\n    call(onUserSignOut),\r\n    call(onEmailSignInStart),\r\n    call(onSignUpStart),\r\n    call(onCheckSession),\r\n  ]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}